#! /bin/bash

# If a Python is installed in GPHOME, use that; otherwise fall back to the
# system Python.
PYTHON="$GPHOME/ext/python/bin/python"
if [ ! -x "$PYTHON" ]; then
    PYTHON=python
fi

# Add our shipped Python modules to the PYTHONPATH; this will be undone by
# gppylib so that this environment doesn't pollute child processes.
if [ -n "${PYTHONPATH+set}" ]; then
    # Note that we check for a set PYTHONPATH rather than an empty one. An empty
    # PYTHONPATH component behaves differently from an unset one, so it's
    # important not to clobber it.
    export PYTHONPATH="$GPHOME/lib/python:${PYTHONPATH}"
else
    export PYTHONPATH="$GPHOME/lib/python"
fi

"${PYTHON}" "$@"
